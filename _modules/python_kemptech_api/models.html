

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>python_kemptech_api.models &mdash; python-kemptech-api 0.7.18 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="python-kemptech-api 0.7.18 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> python-kemptech-api
          

          
          </a>

          
            
            
              <div class="version">
                0.7.18
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python_kemptech_api.html">python_kemptech_api package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">python-kemptech-api</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>python_kemptech_api.models</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for python_kemptech_api.models</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">subprocess</span>

<span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">exceptions</span>

<span class="kn">from</span> <span class="nn">python_kemptech_api</span> <span class="k">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">python_kemptech_api.api_xml</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">get_data_field</span><span class="p">,</span>
    <span class="n">is_successful</span><span class="p">,</span>
    <span class="n">get_data</span><span class="p">,</span>
    <span class="n">get_error_msg</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">python_kemptech_api.capabilities</span> <span class="k">import</span> <span class="n">CAPABILITIES</span><span class="p">,</span> <span class="n">DEFAULT</span>
<span class="kn">from</span> <span class="nn">python_kemptech_api.exceptions</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">LoadMasterParameterError</span><span class="p">,</span>
    <span class="n">KempTechApiException</span><span class="p">,</span>
    <span class="n">BackupFailed</span><span class="p">,</span>
    <span class="n">CommandNotAvailableException</span><span class="p">,</span>
    <span class="n">UserAlreadyExistsException</span><span class="p">,</span>
    <span class="n">DownloadUserCertFailed</span><span class="p">,</span>
    <span class="n">NotVirtualServiceInstanceError</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">python_kemptech_api.generic</span> <span class="k">import</span> <span class="n">HttpClient</span><span class="p">,</span> <span class="n">AccessInfoMixin</span>
<span class="kn">from</span> <span class="nn">python_kemptech_api.objects</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">VirtualService</span><span class="p">,</span>
    <span class="n">CipherSet</span><span class="p">,</span>
    <span class="n">Certificate</span><span class="p">,</span>
    <span class="n">Sso</span><span class="p">,</span>
    <span class="n">Rule</span><span class="p">,</span>
    <span class="n">GlobalACL</span><span class="p">,</span>
    <span class="n">Template</span><span class="p">,</span>
    <span class="n">Fqdn</span><span class="p">,</span>
    <span class="n">Cluster</span><span class="p">,</span>
    <span class="n">Range</span><span class="p">,</span>
    <span class="n">CustomLocation</span><span class="p">,</span>
    <span class="n">Interface</span><span class="p">,</span>
    <span class="n">IntermediateCertificate</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">python_kemptech_api.utils</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">send_response</span><span class="p">,</span>
    <span class="n">validate_port</span><span class="p">,</span>
    <span class="n">validate_ip</span><span class="p">,</span>
    <span class="n">validate_protocol</span><span class="p">,</span>
    <span class="n">get_api_bool_string</span><span class="p">,</span>
    <span class="n">cast_to_list</span><span class="p">,</span>
    <span class="n">get_dict_entry_as_list</span><span class="p">,</span>
    <span class="n">get_sub_vs_list_from_data</span><span class="p">,</span>
    <span class="n">build_object</span><span class="p">,</span>
    <span class="n">list_object</span>
<span class="p">)</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="BaseKempAppliance"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance">[docs]</a><span class="k">class</span> <span class="nc">BaseKempAppliance</span><span class="p">(</span><span class="n">HttpClient</span><span class="p">,</span> <span class="n">AccessInfoMixin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">443</span><span class="p">,</span> <span class="n">cert</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span> <span class="o">=</span> <span class="n">ip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cert</span> <span class="o">=</span> <span class="n">cert</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_point</span> <span class="o">=</span> <span class="s2">&quot;access&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">BaseKempAppliance</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">DEFAULT_TLS_VERSION</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">cert</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">version</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">version</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">version</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">version</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">version</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_do_request_no_api</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform a get in the context of enabling the API.&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert</span><span class="p">:</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tls_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cert</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tls_session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                         <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tls_session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">resp</span><span class="o">.</span><span class="n">status_code</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;https://</span><span class="si">{ip}</span><span class="s2">:</span><span class="si">{port}</span><span class="s2">/</span><span class="si">{access}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">ip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">,</span>
                <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
                <span class="n">access</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">access_point</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;https://</span><span class="si">{user}</span><span class="s2">:</span><span class="si">{pw}</span><span class="s2">@</span><span class="si">{ip}</span><span class="s2">:</span><span class="si">{port}</span><span class="s2">/</span><span class="si">{access}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                <span class="n">pw</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
                <span class="n">ip</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">,</span>
                <span class="n">port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
                <span class="n">access</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">access_point</span>
            <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;7.1.34&quot;</span>
        <span class="k">return</span> <span class="n">CAPABILITIES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span> <span class="n">CAPABILITIES</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_get_curl_command_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a properly formatted curl command equivalent of the API call</span>
<span class="sd">        :param command:</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">curl</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;curl&#39;</span><span class="p">,</span> <span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s1">&#39;-k&#39;</span><span class="p">,</span> <span class="s1">&#39;--connect-timeout&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">TIMEOUT</span><span class="p">)]</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">command</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert</span><span class="p">:</span>
            <span class="n">curl</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;-E&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert</span><span class="p">])</span>
        <span class="n">curl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">curl</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">license</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Current license on the LoadMaster</span>

<span class="sd">        :return: License information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/licenseinfo&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">license_info</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="c1"># Fix annoying API weirdness</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

                    <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
                    <span class="c1"># Catch scenarios where there is no data</span>
                    <span class="k">pass</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>

                <span class="n">license_info</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">license_info</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">interfaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Dictionary of named interfaces</span>

<span class="sd">        :return: Dict with interface name and Interface instance key / value pairs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">interface</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">interface</span>
                <span class="k">for</span> <span class="n">interface</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_interfaces</span><span class="p">()}</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<div class="viewcode-block" id="BaseKempAppliance.set_parameter"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.set_parameter">[docs]</a>    <span class="k">def</span> <span class="nf">set_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign the value to the given loadmaster parameter</span>

<span class="sd">        :param parameter: A valid LoadMaster parameter.</span>
<span class="sd">        :type parameter: str.</span>
<span class="sd">        :param value: The value to be assigned</span>
<span class="sd">        :type value: str.</span>
<span class="sd">        :raises: LoadMasterParameterError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="n">parameter</span><span class="p">,</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/set&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_global_acl</span><span class="p">()</span>

<div class="viewcode-block" id="BaseKempAppliance.get_global_acl"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_global_acl">[docs]</a>    <span class="k">def</span> <span class="nf">get_global_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">GlobalACL</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.get_parameter"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_parameter">[docs]</a>    <span class="k">def</span> <span class="nf">get_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the value of the given LoadMaster parameter</span>

<span class="sd">        :param parameter: A valid LoadMaster parameter.</span>
<span class="sd">        :type parameter: str.</span>
<span class="sd">        :return: str -- The parameter value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="n">parameter</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/get&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">get_data_field</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">parameter</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="c1"># This hack converts possible HTML to an awful one string</span>
            <span class="c1"># disaster instead of returning parsed html as an OrderedDict.</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{!s}</span><span class="s2">=</span><span class="si">{!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span>
                            <span class="nb">sorted</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

        <span class="k">if</span> <span class="n">parameter</span> <span class="o">==</span> <span class="s2">&quot;version&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="BaseKempAppliance.get_all_parameters"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_all_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Return all parameters as a dict with lowercase keys</span>
<span class="sd">        :return: A dict of all the parameters, with the keys in lowercase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/getall&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">((</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">())</span></div>

<div class="viewcode-block" id="BaseKempAppliance.enable_api"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.enable_api">[docs]</a>    <span class="k">def</span> <span class="nf">enable_api</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">health_check_api</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Enable LoadMaster RESTfull API</span>

<span class="sd">        This method will attempt to enable the LoadMaster&#39;s REST API the &#39;right&#39; way</span>
<span class="sd">        by initially trying to set it with enableapi parameter. If this fails it will</span>
<span class="sd">        attempt to set it the old way using the progs URL.</span>

<span class="sd">        :param health_check_api: If True, an extra call to the API will be made</span>
<span class="sd">                                 to verify operability, only works for machines older</span>
<span class="sd">                                 than 7.2.36.</span>
<span class="sd">        :return: True if successfully enabled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Can&#39;t use the HttpClient methods for this as the endpoint is different</span>
        <span class="c1"># (or has strict stipulations) when attempting to enable the API.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">status_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_request_no_api</span><span class="p">(</span><span class="s1">&#39;access/set?param=enableapi&amp;value=yes&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_do_request_no_api</span><span class="p">(</span><span class="s1">&#39;progs/doconfig/enableapi/set/yes&#39;</span><span class="p">)</span>
                <span class="n">status_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_request_no_api</span><span class="p">(</span><span class="s1">&#39;progs/status/logout&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">status_code</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">health_check_api</span><span class="p">:</span>
                    <span class="c1"># Health check to see if API was actually enabled</span>
                    <span class="c1"># if it failed its usually due to auth error so raise a 401</span>
                    <span class="n">status_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_request_no_api</span><span class="p">(</span><span class="s1">&#39;access/get?param=version&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">401</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">status_code</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Enable API failed because of: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">e</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">),</span> <span class="n">is_xml_msg</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.stats"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.stats">[docs]</a>    <span class="k">def</span> <span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/stats&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.update_firmware"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.update_firmware">[docs]</a>    <span class="k">def</span> <span class="nf">update_firmware</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s1">&#39;/installpatch&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.restore_firmware"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.restore_firmware">[docs]</a>    <span class="k">def</span> <span class="nf">restore_firmware</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/restorepatch&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.reset_logs"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.reset_logs">[docs]</a>    <span class="k">def</span> <span class="nf">reset_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/logging/resetlogs&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.download_logs"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.download_logs">[docs]</a>    <span class="k">def</span> <span class="nf">download_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/logging/downloadlogs&quot;</span><span class="p">)</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span> <span class="ow">or</span> <span class="s2">&quot;LoadMaster_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span> <span class="o">+</span> <span class="s2">&quot;_Logs.tgz&quot;</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">filename</span></div>

<div class="viewcode-block" id="BaseKempAppliance.change_bal_password"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.change_bal_password">[docs]</a>    <span class="k">def</span> <span class="nf">change_bal_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_password</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;currpassword&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
            <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">new_password</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/usersetsyspassword&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">new_password</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="BaseKempAppliance.add_local_user"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.add_local_user">[docs]</a>    <span class="k">def</span> <span class="nf">add_local_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
            <span class="s1">&#39;radius&#39;</span><span class="p">:</span> <span class="n">get_api_bool_string</span><span class="p">(</span><span class="n">radius</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;nopass&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">password</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/useraddlocal&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">KempTechApiException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;User already exists.&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UserAlreadyExistsException</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.delete_local_user"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.delete_local_user">[docs]</a>    <span class="k">def</span> <span class="nf">delete_local_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/userdellocal&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.set_user_perms"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.set_user_perms">[docs]</a>    <span class="k">def</span> <span class="nf">set_user_perms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">perms</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">perms</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">perms</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">perms</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
            <span class="s1">&#39;perms&#39;</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">perm</span> <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">]),</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/usersetperms&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.new_user_cert"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.new_user_cert">[docs]</a>    <span class="k">def</span> <span class="nf">new_user_cert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/usernewcert&#39;</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.download_user_cert"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.download_user_cert">[docs]</a>    <span class="k">def</span> <span class="nf">download_user_cert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">):</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.cert&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user</span><span class="p">))</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_curl_command_list</span><span class="p">(</span><span class="s1">&#39;userdownloadcert?user=</span><span class="si">{}</span><span class="s1">&#39;</span>
                                              <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user</span><span class="p">))</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">file</span><span class="p">)</span>
            <span class="n">file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">DownloadUserCertFailed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">file_name</span></div>

<div class="viewcode-block" id="BaseKempAppliance.shutdown"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.shutdown">[docs]</a>    <span class="k">def</span> <span class="nf">shutdown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/shutdown&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.reboot"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.reboot">[docs]</a>    <span class="k">def</span> <span class="nf">reboot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/reboot&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.get_license_info"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_license_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_license_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;360/licenseinfo&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">KempTechApiException</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CommandNotAvailableException</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;/access360/licenseinfo&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.list_addons"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.list_addons">[docs]</a>    <span class="k">def</span> <span class="nf">list_addons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/listaddon&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.get_diagnostic"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_diagnostic">[docs]</a>    <span class="k">def</span> <span class="nf">get_diagnostic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">diagnostic</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/logging/</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">diagnostic</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">response</span></div>

<div class="viewcode-block" id="BaseKempAppliance.backup"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.backup">[docs]</a>    <span class="k">def</span> <span class="nf">backup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;backups&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">_</span><span class="si">{}</span><span class="s2">.backup&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">_%H:%M:%S&quot;</span><span class="p">)))</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_curl_command_list</span><span class="p">(</span><span class="s1">&#39;backup&#39;</span><span class="p">)</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">file</span><span class="p">)</span>
            <span class="n">file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">BackupFailed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">file_name</span></div>

<div class="viewcode-block" id="BaseKempAppliance.restore_backup"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.restore_backup">[docs]</a>    <span class="k">def</span> <span class="nf">restore_backup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">backup_type</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="c1"># 1 LoadMaster Base Configuration</span>
        <span class="c1"># 2 Virtual Service Configuration</span>
        <span class="c1"># 3 GEO Configuration</span>
        <span class="k">if</span> <span class="n">backup_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
            <span class="n">backup_type</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">backup_type</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s1">&#39;/restore&#39;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span>
                              <span class="n">parameters</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.alsi_license"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.alsi_license">[docs]</a>    <span class="k">def</span> <span class="nf">alsi_license</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kemp_id</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;kempid&quot;</span><span class="p">:</span> <span class="n">kemp_id</span><span class="p">,</span>
            <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/alsilicense&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.offline_license"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.offline_license">[docs]</a>    <span class="k">def</span> <span class="nf">offline_license</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">license_file</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;/license&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">license_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.set_initial_password"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.set_initial_password">[docs]</a>    <span class="k">def</span> <span class="nf">set_initial_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;passwd&quot;</span><span class="p">:</span> <span class="n">password</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/set_initial_passwd&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.kill_asl_instance"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.kill_asl_instance">[docs]</a>    <span class="k">def</span> <span class="nf">kill_asl_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/killaslinstance&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.get_interfaces"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_interfaces">[docs]</a>    <span class="k">def</span> <span class="nf">get_interfaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">interfaces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/showiface&#39;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">interfaces_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Interface&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">interfaces_data</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">interfaces_data</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">iface_data</span> <span class="ow">in</span> <span class="n">interfaces_data</span><span class="p">:</span>
                <span class="n">iface</span> <span class="o">=</span> <span class="n">build_object</span><span class="p">(</span><span class="n">Interface</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">iface_data</span><span class="p">)</span>
                <span class="c1"># Check for duplicate IPs as there is a bug in LoadMaster showiface</span>
                <span class="c1"># that makes unset interfaces inherit the previous interfaces IP.</span>
                <span class="k">for</span> <span class="n">interface</span> <span class="ow">in</span> <span class="n">interfaces</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">iface</span><span class="o">.</span><span class="n">addr</span> <span class="o">==</span> <span class="n">interface</span><span class="o">.</span><span class="n">addr</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">interfaces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">iface</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">interfaces</span>
        <span class="k">except</span> <span class="n">KempTechApiException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># If showiface does not support listing of all interfaces (possibly due to</span>
            <span class="c1"># older version loadmasters) do it the hard way by doing it one by one getting</span>
            <span class="c1"># the IDs from /access/stats.</span>
            <span class="c1"># This will cause N+1 API calls to occur, N being the number of interfaces.</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;status_code&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">422</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/stats&#39;</span><span class="p">)</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
                    <span class="n">xml_object</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Network&#39;</span><span class="p">,</span> <span class="p">{})</span>
                <span class="k">except</span> <span class="n">KempTechApiException</span><span class="p">:</span>
                    <span class="n">xml_object</span> <span class="o">=</span> <span class="p">{}</span>

                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">xml_object</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_interface</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;ifaceID&#39;</span><span class="p">])</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">k</span>
                    <span class="n">interfaces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">interfaces</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span></div>

<div class="viewcode-block" id="BaseKempAppliance.get_interface"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_interface">[docs]</a>    <span class="k">def</span> <span class="nf">get_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showiface&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;interface&quot;</span><span class="p">:</span> <span class="n">interface</span><span class="p">})</span>
        <span class="n">xml_object</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">build_object</span><span class="p">(</span><span class="n">Interface</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">xml_object</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span></div>

<div class="viewcode-block" id="BaseKempAppliance.initial_license"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.initial_license">[docs]</a>    <span class="k">def</span> <span class="nf">initial_license</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">license_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">callhome</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">new_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">kempid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">get_eula</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">accept_eula</span><span class="p">(</span><span class="n">license_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_callhome</span><span class="p">(</span><span class="n">callhome</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kempid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alsi_license</span><span class="p">(</span><span class="n">kempid</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span> <span class="n">kempid</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initial_password</span><span class="p">(</span><span class="n">new_password</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="s2">&quot;Please license before proceeding.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseKempAppliance.get_eula"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.get_eula">[docs]</a>    <span class="k">def</span> <span class="nf">get_eula</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">api</span> <span class="o">=</span> <span class="s2">&quot;/readeula&quot;</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">api</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">magic</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Magic&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Eula&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseKempAppliance.accept_eula"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.accept_eula">[docs]</a>    <span class="k">def</span> <span class="nf">accept_eula</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">license_type</span><span class="o">=</span><span class="s2">&quot;trial&quot;</span><span class="p">):</span>
        <span class="n">api</span> <span class="o">=</span> <span class="s2">&quot;/accepteula&quot;</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">license_type</span><span class="p">,</span>
            <span class="s2">&quot;magic&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">magic</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">magic</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Magic&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="BaseKempAppliance.set_callhome"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.set_callhome">[docs]</a>    <span class="k">def</span> <span class="nf">set_callhome</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">api</span> <span class="o">=</span> <span class="s2">&quot;/accepteula2&quot;</span>

        <span class="k">if</span> <span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">enabled</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">enabled</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;accept&quot;</span><span class="p">:</span> <span class="n">enabled</span><span class="p">,</span>
            <span class="s2">&quot;magic&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">magic</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span></div>

<div class="viewcode-block" id="BaseKempAppliance.initial_password"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.initial_password">[docs]</a>    <span class="k">def</span> <span class="nf">initial_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;2fourall&quot;</span><span class="p">):</span>
        <span class="n">api</span> <span class="o">=</span> <span class="s2">&quot;/set_initial_passwd&quot;</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;passwd&quot;</span><span class="p">:</span> <span class="n">password</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span></div>

<div class="viewcode-block" id="BaseKempAppliance.ping"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.ping">[docs]</a>    <span class="k">def</span> <span class="nf">ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;addr&quot;</span><span class="p">:</span> <span class="n">host</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">interface</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;intf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">interface</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/logging/ping&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">KempTechApiException</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;connect: Network is unreachable&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="BaseKempAppliance.refresh_dns"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.BaseKempAppliance.refresh_dns">[docs]</a>    <span class="k">def</span> <span class="nf">refresh_dns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">api</span> <span class="o">=</span> <span class="s2">&quot;/resolvenow&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">api</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="Geo"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo">[docs]</a><span class="k">class</span> <span class="nc">Geo</span><span class="p">(</span><span class="n">BaseKempAppliance</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;GEO API object.&quot;&quot;&quot;</span>
    <span class="n">_GEO_PARAMS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;sourceofauthority&quot;</span><span class="p">,</span>
        <span class="s2">&quot;namesrv&quot;</span><span class="p">,</span>
        <span class="s2">&quot;soaemail&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ttl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;persist&quot;</span><span class="p">,</span>
        <span class="s2">&quot;checkinterval&quot;</span><span class="p">,</span>
        <span class="s2">&quot;conntimeout&quot;</span><span class="p">,</span>
        <span class="s2">&quot;retryattempts&quot;</span>
    <span class="p">]</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">Geo</span><span class="o">.</span><span class="n">_GEO_PARAMS</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_geo_parameter</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_parameter</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">parameter</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">Geo</span><span class="o">.</span><span class="n">_GEO_PARAMS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_geo_parameter</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_parameter</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<div class="viewcode-block" id="Geo.set_geo_parameter"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.set_geo_parameter">[docs]</a>    <span class="k">def</span> <span class="nf">set_geo_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;assign the value to the given loadmaster parameter</span>

<span class="sd">        :param parameter: a valid LoadMaster parameter.</span>
<span class="sd">        :type parameter: str.</span>
<span class="sd">        :param value: the value to be assigned</span>
<span class="sd">        :type value: str.</span>
<span class="sd">        :raises: LoadMasterParameterError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">parameter</span><span class="p">:</span> <span class="n">value</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/modparams&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span></div>

<div class="viewcode-block" id="Geo.get_geo_parameter"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_geo_parameter">[docs]</a>    <span class="k">def</span> <span class="nf">get_geo_parameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;get the value of the given GEO parameter</span>

<span class="sd">        :param parameter: a valid GEO parameter.</span>
<span class="sd">        :type parameter: str.</span>
<span class="sd">        :return: str -- the parameter value</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">_find_key_recursive</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="n">match</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="n">match</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="n">_find_key_recursive</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">item</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/listparams&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">_find_key_recursive</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="Geo.enable_geo"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.enable_geo">[docs]</a>    <span class="k">def</span> <span class="nf">enable_geo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/enablegeo&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="Geo.disable_geo"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.disable_geo">[docs]</a>    <span class="k">def</span> <span class="nf">disable_geo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/disablegeo&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fqdns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">fqdn</span><span class="o">.</span><span class="n">fqdn</span><span class="p">:</span> <span class="n">fqdn</span> <span class="k">for</span> <span class="n">fqdn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_fqdns</span><span class="p">()}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">clusters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">cluster</span><span class="o">.</span><span class="n">ip</span><span class="p">:</span> <span class="n">cluster</span> <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clusters</span><span class="p">()}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ipranges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">iprange</span><span class="o">.</span><span class="n">ip</span><span class="p">:</span> <span class="n">iprange</span> <span class="k">for</span> <span class="n">iprange</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ranges</span><span class="p">()}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">customlocations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">customlocation</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">customlocation</span>
                <span class="k">for</span> <span class="n">customlocation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_customlocations</span><span class="p">()}</span>

<div class="viewcode-block" id="Geo.get_acl_settings"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_acl_settings">[docs]</a>    <span class="k">def</span> <span class="nf">get_acl_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/getsettings&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;GeoAcl&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="n">acl_settings</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;yes&quot;</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;no&quot;</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">elif</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;Never&quot;</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>  <span class="c1"># pylint: disable=redefined-variable-type</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>

            <span class="n">acl_settings</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="n">v</span>

        <span class="k">return</span> <span class="n">acl_settings</span></div>

<div class="viewcode-block" id="Geo.set_acl_settings"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.set_acl_settings">[docs]</a>    <span class="k">def</span> <span class="nf">set_acl_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">autoupdate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">autoinstall</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">installtime</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">autoupdate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;setautoupdate&quot;</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;enable&quot;</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">autoupdate</span>

        <span class="k">elif</span> <span class="n">autoinstall</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;setautoinstall&quot;</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;enable&quot;</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">autoinstall</span>

        <span class="k">elif</span> <span class="n">installtime</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;setinstalltime&quot;</span>
            <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;hour&quot;</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">autoinstall</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">]:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;yes&quot;</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">]:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">key</span><span class="p">:</span> <span class="n">value</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">command</span><span class="p">),</span> <span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_autoupdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl_settings</span><span class="p">()[</span><span class="s1">&#39;autoupdate&#39;</span><span class="p">]</span>

    <span class="nd">@acl_autoupdate</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">acl_autoupdate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acl_settings</span><span class="p">(</span><span class="n">autoupdate</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_autoinstall</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl_settings</span><span class="p">()[</span><span class="s1">&#39;autoinstall&#39;</span><span class="p">]</span>

    <span class="nd">@acl_autoinstall</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">acl_autoinstall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acl_settings</span><span class="p">(</span><span class="n">autoinstall</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_installtime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl_settings</span><span class="p">()[</span><span class="s1">&#39;installtime&#39;</span><span class="p">]</span>

    <span class="nd">@acl_installtime</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">acl_installtime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acl_settings</span><span class="p">(</span><span class="n">installtime</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_lastupdated</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl_settings</span><span class="p">()[</span><span class="s1">&#39;lastupdated&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_lastinstalled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl_settings</span><span class="p">()[</span><span class="s1">&#39;lastinstalled&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="Geo.acl_update"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.acl_update">[docs]</a>    <span class="k">def</span> <span class="nf">acl_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/updatenow&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span></div>

<div class="viewcode-block" id="Geo.acl_install"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.acl_install">[docs]</a>    <span class="k">def</span> <span class="nf">acl_install</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/installnow&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_download</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/downloadlist&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">response</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_changes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/downloadchanges&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">response</span>

<div class="viewcode-block" id="Geo.get_acl"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_acl">[docs]</a>    <span class="k">def</span> <span class="nf">get_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/listcustom&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="n">list_tag</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">list&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>

        <span class="n">acl_list</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">list_tag</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">acl_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">acl_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">acl_list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">acl_list</span> <span class="o">=</span> <span class="n">acl_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;addr&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">acl_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">acl_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">acl_list</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">acl_list</span></div>

<div class="viewcode-block" id="Geo.add_acl"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.add_acl">[docs]</a>    <span class="k">def</span> <span class="nf">add_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
            <span class="s2">&quot;addr&quot;</span><span class="p">:</span> <span class="n">value</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/addcustom&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span></div>

<div class="viewcode-block" id="Geo.remove_acl"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.remove_acl">[docs]</a>    <span class="k">def</span> <span class="nf">remove_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
            <span class="s2">&quot;addr&quot;</span><span class="p">:</span> <span class="n">value</span>
        <span class="p">}</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/geoacl/removecustom&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span></div>

<div class="viewcode-block" id="Geo.set_acl"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.set_acl">[docs]</a>    <span class="k">def</span> <span class="nf">set_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Setting ACL expects a list of IP networks&quot;</span><span class="p">)</span>

        <span class="n">current</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>

        <span class="n">to_delete</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="n">to_add</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">current</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">to_delete</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_acl</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">address</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">to_add</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_acl</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">address</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_whitelist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>

    <span class="nd">@acl_whitelist</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">acl_whitelist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acl</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl_blacklist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acl</span><span class="p">(</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

    <span class="nd">@acl_blacklist</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">acl_blacklist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_acl</span><span class="p">(</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

<div class="viewcode-block" id="Geo.create_fqdn"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.create_fqdn">[docs]</a>    <span class="k">def</span> <span class="nf">create_fqdn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fqdn</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Fqdn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">fqdn</span><span class="p">)</span></div>

<div class="viewcode-block" id="Geo.get_fqdns"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_fqdns">[docs]</a>    <span class="k">def</span> <span class="nf">get_fqdns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listfqdns&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">list_object</span><span class="p">(</span><span class="n">Fqdn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">KempTechApiException</span><span class="p">:</span>
            <span class="c1"># If API returns &#39;No geo data found&#39; return an empty list</span>
            <span class="k">return</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Geo.get_fqdn"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_fqdn">[docs]</a>    <span class="k">def</span> <span class="nf">get_fqdn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fqdn</span><span class="p">):</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;fqdn&quot;</span><span class="p">:</span> <span class="n">fqdn</span>
        <span class="p">}</span>

        <span class="c1"># Append a . to the fqdn if it does not</span>
        <span class="c1"># exist as it is required for FQDN syntax</span>
        <span class="k">if</span> <span class="n">service_id</span><span class="p">[</span><span class="s1">&#39;fqdn&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
            <span class="n">service_id</span><span class="p">[</span><span class="s1">&#39;fqdn&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="s2">&quot;.&quot;</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showfqdn&quot;</span><span class="p">,</span> <span class="n">service_id</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">fqdn</span> <span class="o">=</span> <span class="n">build_object</span><span class="p">(</span><span class="n">Fqdn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fqdn</span></div>

<div class="viewcode-block" id="Geo.create_cluster"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.create_cluster">[docs]</a>    <span class="k">def</span> <span class="nf">create_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cluster factory with pre-configured LoadMaster connection.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Cluster</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Geo.get_clusters"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_clusters">[docs]</a>    <span class="k">def</span> <span class="nf">get_clusters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listclusters&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">clusters</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">except</span> <span class="n">KempTechApiException</span><span class="p">:</span>
            <span class="n">clusters</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">cluster_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">clusters</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">clusters</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">clusters</span><span class="p">:</span>
            <span class="n">cluster</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_cluster</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">cluster_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cluster_list</span></div>

<div class="viewcode-block" id="Geo.get_cluster"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_cluster">[docs]</a>    <span class="k">def</span> <span class="nf">get_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip</span><span class="p">):</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="n">ip</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showcluster&quot;</span><span class="p">,</span> <span class="n">service_id</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">cluster_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">)</span>
        <span class="c1"># again line below will fail with ValidationError if empty response</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cluster_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                <span class="s2">&quot;Unexepected number of clusters returned&quot;</span><span class="p">,</span>
                <span class="n">cluster_data</span><span class="p">)</span>
        <span class="n">cluster</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_cluster</span><span class="p">(</span><span class="n">cluster_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cluster</span></div>

<div class="viewcode-block" id="Geo.build_cluster"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.build_cluster">[docs]</a>    <span class="k">def</span> <span class="nf">build_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cluster</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Cluster instance with standard defaults&quot;&quot;&quot;</span>
        <span class="n">cluster_object</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span>
                                 <span class="n">cluster</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;IPAddress&#39;</span><span class="p">),</span>
                                 <span class="n">cluster</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">))</span>
        <span class="n">cluster_object</span><span class="o">.</span><span class="n">populate_default_attributes</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cluster_object</span></div>

<div class="viewcode-block" id="Geo.create_range"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.create_range">[docs]</a>    <span class="k">def</span> <span class="nf">create_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">mask</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Range factory with pre-configured LoadMaster connection.&quot;&quot;&quot;</span>
        <span class="n">iprange</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iprange</span></div>

<div class="viewcode-block" id="Geo.get_ranges"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_ranges">[docs]</a>    <span class="k">def</span> <span class="nf">get_ranges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listips&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">ranges</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;IPAddress&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">except</span> <span class="n">KempTechApiException</span><span class="p">:</span>
            <span class="n">ranges</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">range_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ranges</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">ranges</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
            <span class="nb">range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_range</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="n">range_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">range_list</span></div>

<div class="viewcode-block" id="Geo.get_range"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_range">[docs]</a>    <span class="k">def</span> <span class="nf">get_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip</span><span class="p">):</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ipaddress&quot;</span><span class="p">:</span> <span class="n">ip</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showip&quot;</span><span class="p">,</span> <span class="n">service_id</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="c1"># again line below will fail with ValidationError if empty response</span>
        <span class="n">range_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cluster&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">range_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                <span class="s2">&quot;Unexepected number of ranges returned&quot;</span><span class="p">,</span> <span class="n">range_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_range</span><span class="p">(</span><span class="n">range_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="Geo.build_range"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.build_range">[docs]</a>    <span class="k">def</span> <span class="nf">build_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">range</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Range instance with standard defaults&quot;&quot;&quot;</span>
        <span class="n">range_object</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span>
                             <span class="nb">range</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;IPAddress&#39;</span><span class="p">),</span>
                             <span class="nb">range</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Mask&#39;</span><span class="p">))</span>
        <span class="n">range_object</span><span class="o">.</span><span class="n">populate_default_attributes</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">range_object</span></div>

<div class="viewcode-block" id="Geo.create_customlocation"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.create_customlocation">[docs]</a>    <span class="k">def</span> <span class="nf">create_customlocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;CustomLocation factory with pre-configured LoadMaster connection.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CustomLocation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Geo.get_customlocations"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_customlocations">[docs]</a>    <span class="k">def</span> <span class="nf">get_customlocations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listcustomlocation&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">customlocations</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">except</span> <span class="n">KempTechApiException</span><span class="p">:</span>
            <span class="n">customlocations</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">customlocation_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">customlocations</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">customlocations</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">customlocations</span><span class="p">:</span>
            <span class="n">customlocation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_customlocation</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">customlocation_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">customlocation</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">customlocation_list</span></div>

<div class="viewcode-block" id="Geo.get_customlocation"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.get_customlocation">[docs]</a>    <span class="k">def</span> <span class="nf">get_customlocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listcustomlocation&quot;</span><span class="p">,</span> <span class="n">service_id</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="c1"># again line below will fail with ValidationError if empty response</span>
        <span class="n">customlocations_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="n">customlocation_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">customlocations_data</span>
                               <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">customlocation_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                <span class="s2">&quot;Unexepected number of custom locations returned&quot;</span><span class="p">,</span>
                <span class="n">customlocation_data</span><span class="p">)</span>
        <span class="n">customlocation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_range</span><span class="p">(</span><span class="n">customlocation_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">customlocation</span></div>

<div class="viewcode-block" id="Geo.build_customlocation"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.Geo.build_customlocation">[docs]</a>    <span class="k">def</span> <span class="nf">build_customlocation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">customlocation</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Range instance with standard defaults&quot;&quot;&quot;</span>
        <span class="n">customlocation_object</span> <span class="o">=</span> <span class="n">CustomLocation</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span>
            <span class="n">customlocation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">customlocation_object</span></div></div>


<div class="viewcode-block" id="LoadMaster"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster">[docs]</a><span class="k">class</span> <span class="nc">LoadMaster</span><span class="p">(</span><span class="n">BaseKempAppliance</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;LoadMaster API object.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">vs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">vs</span><span class="o">.</span><span class="n">index</span><span class="p">):</span> <span class="n">vs</span> <span class="k">for</span> <span class="n">vs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_virtual_services</span><span class="p">()}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rules</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">rule</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">rule</span> <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rules</span><span class="p">()}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sso</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">sso</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">sso</span> <span class="k">for</span> <span class="n">sso</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ssos</span><span class="p">()}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">templates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">template</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">template</span> <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_templates</span><span class="p">()}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">certificates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">certificate</span><span class="o">.</span><span class="n">certname</span><span class="p">:</span> <span class="n">certificate</span> <span class="k">for</span> <span class="n">certificate</span> <span class="ow">in</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_certificates</span><span class="p">()}</span>

<div class="viewcode-block" id="LoadMaster.get_adaptive_parameters"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_adaptive_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">get_adaptive_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showadaptive&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Data&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="LoadMaster.set_adaptive_parameters"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.set_adaptive_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">set_adaptive_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                <span class="n">adaptiveurl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">adaptiveport</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">adaptiveinterval</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                <span class="n">minpercent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">adaptiveurl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;AdaptiveURL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">adaptiveurl</span>
        <span class="k">if</span> <span class="n">adaptiveport</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">validate_port</span><span class="p">(</span><span class="n">adaptiveport</span><span class="p">)</span>
            <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;AdaptivePort&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">adaptiveport</span>
        <span class="k">if</span> <span class="n">adaptiveinterval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;AdaptiveInterval&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">adaptiveinterval</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                    <span class="s2">&quot;AdaptiveInterval specified is not an integer&quot;</span><span class="p">,</span>
                    <span class="n">adaptiveinterval</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">minpercent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;MinPercent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">minpercent</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                    <span class="s2">&quot;MinPercent specified is not an integer&quot;</span><span class="p">,</span>
                    <span class="n">minpercent</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/modadaptive&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.get_check_parameters"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_check_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">get_check_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showhealth&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">formatted</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">formatted</span><span class="p">[</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">formatted</span></div>

<div class="viewcode-block" id="LoadMaster.set_check_parameters"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.set_check_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">set_check_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">retryinterval</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">retrycount</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;Timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                    <span class="s2">&quot;Timeout specified is not an integer&quot;</span><span class="p">,</span>
                    <span class="n">timeout</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">retrycount</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;RetryCount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">retrycount</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                    <span class="s2">&quot;RetryCount specified is not an integer&quot;</span><span class="p">,</span>
                    <span class="n">retrycount</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">retryinterval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;RetryInterval&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">retryinterval</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span>
                    <span class="s2">&quot;RetryInterval specified is not an integer&quot;</span><span class="p">,</span>
                    <span class="n">retryinterval</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/modhealth&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LoadMasterParameterError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.create_sso"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.create_sso">[docs]</a>    <span class="k">def</span> <span class="nf">create_sso</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Sso</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.get_ssos"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_ssos">[docs]</a>    <span class="k">def</span> <span class="nf">get_ssos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showdomain&quot;</span><span class="p">)</span>
        <span class="n">ssos</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Domain&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">ssos_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># if there is no Rule key, build_virtual_services will fail with a</span>
        <span class="c1"># ValidationError, which is the best we can do for now</span>
        <span class="c1"># (without changing the upstream code and raising an exception earlier,</span>
        <span class="c1"># possibly retrying)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ssos</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">ssos</span> <span class="o">=</span> <span class="p">[</span><span class="n">ssos</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">sso</span> <span class="ow">in</span> <span class="n">ssos</span><span class="p">:</span>
            <span class="n">sso_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_sso</span><span class="p">(</span><span class="n">sso</span><span class="p">)</span>
            <span class="n">ssos_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sso_object</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ssos_list</span></div>

<div class="viewcode-block" id="LoadMaster.get_sso"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_sso">[docs]</a>    <span class="k">def</span> <span class="nf">get_sso</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">service_id</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showdomain&quot;</span><span class="p">,</span> <span class="n">service_id</span><span class="p">)</span>
        <span class="n">sso</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Domain&quot;</span><span class="p">)</span>

        <span class="c1"># again line below will fail with ValidationError if empty response</span>
        <span class="n">sso_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_sso</span><span class="p">(</span><span class="n">sso</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sso_object</span></div>

<div class="viewcode-block" id="LoadMaster.build_sso"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.build_sso">[docs]</a>    <span class="k">def</span> <span class="nf">build_sso</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sso</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Rule instance with standard defaults&quot;&quot;&quot;</span>
        <span class="n">sso_object</span> <span class="o">=</span> <span class="n">Sso</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">sso</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">))</span>

        <span class="n">sso_object</span><span class="o">.</span><span class="n">populate_default_attributes</span><span class="p">(</span><span class="n">sso</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sso_object</span></div>

<div class="viewcode-block" id="LoadMaster.create_rule"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.create_rule">[docs]</a>    <span class="k">def</span> <span class="nf">create_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Rule</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.get_rules"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_rules">[docs]</a>    <span class="k">def</span> <span class="nf">get_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showrule&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">rules_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">rule_type</span><span class="p">,</span> <span class="n">rules</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rules</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">rules</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
                <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rule_type</span>
                <span class="n">rule_object</span> <span class="o">=</span> <span class="n">build_object</span><span class="p">(</span><span class="n">Rule</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">rule</span><span class="p">)</span>
                <span class="n">rules_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rule_object</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">rules_list</span></div>

<div class="viewcode-block" id="LoadMaster.get_rule"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_rule">[docs]</a>    <span class="k">def</span> <span class="nf">get_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showrule&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">})</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">rules_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">rule_object</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="s2">&quot;Too many rules returned&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">rule_type</span><span class="p">,</span> <span class="n">rules</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rules</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">rules</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rules</span><span class="p">:</span>
                <span class="n">rule</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rule_type</span>
                <span class="n">rule_object</span> <span class="o">=</span> <span class="n">build_object</span><span class="p">(</span><span class="n">Rule</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">rule</span><span class="p">)</span>
                <span class="n">rules_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rule_object</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">rule_object</span></div>

<div class="viewcode-block" id="LoadMaster.create_cipherset"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.create_cipherset">[docs]</a>    <span class="k">def</span> <span class="nf">create_cipherset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cipherset_name</span><span class="p">,</span> <span class="n">ciphers</span><span class="p">):</span>
        <span class="n">cipherset</span> <span class="o">=</span> <span class="n">CipherSet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">cipherset_name</span><span class="p">,</span> <span class="n">ciphers</span><span class="p">)</span>
        <span class="n">cipherset</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div>

<div class="viewcode-block" id="LoadMaster.create_certificate"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.create_certificate">[docs]</a>    <span class="k">def</span> <span class="nf">create_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">certificate</span><span class="p">,</span> <span class="n">certfile</span><span class="p">,</span> <span class="n">certpass</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Certificate factory with pre-configured LoadMaster connection.&quot;&quot;&quot;</span>
        <span class="n">cert</span> <span class="o">=</span> <span class="n">Certificate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span>
                           <span class="n">certificate</span><span class="p">,</span>
                           <span class="n">certfile</span><span class="o">=</span><span class="n">certfile</span><span class="p">,</span>
                           <span class="n">certpass</span><span class="o">=</span><span class="n">certpass</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cert</span></div>

<div class="viewcode-block" id="LoadMaster.create_intermediate_certificate"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.create_intermediate_certificate">[docs]</a>    <span class="k">def</span> <span class="nf">create_intermediate_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">certificate</span><span class="p">,</span> <span class="n">certfile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Certificate factory with pre-configured LoadMaster connection.&quot;&quot;&quot;</span>
        <span class="n">cert</span> <span class="o">=</span> <span class="n">IntermediateCertificate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span>
                                       <span class="n">certificate</span><span class="p">,</span>
                                       <span class="n">certfile</span><span class="o">=</span><span class="n">certfile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cert</span></div>

<div class="viewcode-block" id="LoadMaster.get_certificates"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_certificates">[docs]</a>    <span class="k">def</span> <span class="nf">get_certificates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;cert&#39;</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listcert&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">certificates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">certs</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cert&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">certs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">certs</span> <span class="o">=</span> <span class="p">[</span><span class="n">certs</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">cert</span> <span class="ow">in</span> <span class="n">certs</span><span class="p">:</span>
            <span class="n">certificate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_certificate</span><span class="p">(</span><span class="n">cert</span><span class="p">)</span>
            <span class="n">certificates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">certificate</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">certificates</span></div>

<div class="viewcode-block" id="LoadMaster.get_intermediate_certificates"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_intermediate_certificates">[docs]</a>    <span class="k">def</span> <span class="nf">get_intermediate_certificates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;cert&#39;</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listintermediate&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">certificates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">certs</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cert&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">certs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">certs</span> <span class="o">=</span> <span class="p">[</span><span class="n">certs</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">cert</span> <span class="ow">in</span> <span class="n">certs</span><span class="p">:</span>
            <span class="n">certificate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_intermediate_certificate</span><span class="p">(</span><span class="n">cert</span><span class="p">)</span>
            <span class="n">certificates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">certificate</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">certificates</span></div>

<div class="viewcode-block" id="LoadMaster.build_certificate"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.build_certificate">[docs]</a>    <span class="k">def</span> <span class="nf">build_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">certificate</span><span class="p">,</span> <span class="n">certfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">certpass</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Certificte instance named certificate&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">certfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="n">Certificate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">certificate</span><span class="p">,</span>
                               <span class="n">certfile</span><span class="o">=</span><span class="n">certfile</span><span class="p">,</span> <span class="n">certpass</span><span class="o">=</span><span class="n">certpass</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="n">Certificate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">certificate</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cert</span></div>

<div class="viewcode-block" id="LoadMaster.build_intermediate_certificate"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.build_intermediate_certificate">[docs]</a>    <span class="k">def</span> <span class="nf">build_intermediate_certificate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">certificate</span><span class="p">,</span> <span class="n">certfile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a Certificte instance named certificate&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">certfile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="n">IntermediateCertificate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span>
                                           <span class="n">certificate</span><span class="p">,</span>
                                           <span class="n">certfile</span><span class="o">=</span><span class="n">certfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="n">IntermediateCertificate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">certificate</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cert</span></div>

<div class="viewcode-block" id="LoadMaster.create_virtual_service"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.create_virtual_service">[docs]</a>    <span class="k">def</span> <span class="nf">create_virtual_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="s2">&quot;tcp&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">VirtualService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">ip</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">protocol</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.get_virtual_services"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_virtual_services">[docs]</a>    <span class="k">def</span> <span class="nf">get_virtual_services</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listvs&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">virtual_services</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">services</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;VS&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">services</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">services</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">service</span> <span class="ow">in</span> <span class="n">services</span><span class="p">:</span>
            <span class="n">master_vs_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MasterVSID&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">master_vs_id</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">vs</span> <span class="ow">in</span> <span class="n">services</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">vs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Index&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="n">master_vs_id</span><span class="p">:</span>
                        <span class="n">virt_serv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_virtual_service</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">vs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">virt_serv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_virtual_service</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="n">virtual_services</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">virt_serv</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">virtual_services</span></div>

<div class="viewcode-block" id="LoadMaster.get_virtual_service"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_virtual_service">[docs]</a>    <span class="k">def</span> <span class="nf">get_virtual_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">validate_ip</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
            <span class="n">validate_port</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
            <span class="n">validate_protocol</span><span class="p">(</span><span class="n">protocol</span><span class="p">)</span>
            <span class="n">service_id</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;vs&quot;</span><span class="p">:</span> <span class="n">address</span><span class="p">,</span> <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">port</span><span class="p">,</span> <span class="s2">&quot;prot&quot;</span><span class="p">:</span> <span class="n">protocol</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">service_id</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;vs&quot;</span><span class="p">:</span> <span class="n">index</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showvs&quot;</span><span class="p">,</span> <span class="n">service_id</span><span class="p">)</span>
        <span class="n">service</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="c1"># again line below will fail with ValidationError if empty response</span>
        <span class="n">virt_serv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_virtual_service</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">virt_serv</span></div>

<div class="viewcode-block" id="LoadMaster.build_virtual_service"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.build_virtual_service">[docs]</a>    <span class="k">def</span> <span class="nf">build_virtual_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a VirtualService instance with populated with API parameters</span>

<span class="sd">        This does not include potentially attached real servers</span>
<span class="sd">        :param service: OrderedDict populated with virtual service data</span>
<span class="sd">        :param response: Optional response of a listvs call. This acts as a</span>
<span class="sd">        cache, if you want to create a lot of VirtualService</span>
<span class="sd">        objects in a row, such as with looping, you can call</span>
<span class="sd">        listvs and pass the response in each time and this</span>
<span class="sd">        will nullify the extra listvs calls.</span>
<span class="sd">        :return: VirtualService object with populated attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_sub_vs</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MasterVSID&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">is_sub_vs</span><span class="p">:</span>
            <span class="c1"># `response` needs to be a dict in here</span>
            <span class="c1"># Add lb properties to the sub vs</span>
            <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/showvs&quot;</span><span class="p">,</span>
                                     <span class="p">{</span><span class="s2">&quot;vs&quot;</span><span class="p">:</span> <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MasterVSID&#39;</span><span class="p">)})</span>
                <span class="n">parent_vs_data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parent_vs_data</span> <span class="o">=</span> <span class="n">response</span>
            <span class="n">subvs_lb_props</span> <span class="o">=</span> <span class="n">get_sub_vs_list_from_data</span><span class="p">(</span><span class="n">parent_vs_data</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">virt_serv</span> <span class="o">=</span> <span class="n">VirtualService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">),</span>
                                       <span class="n">is_sub_vs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">virt_serv</span><span class="o">.</span><span class="n">subvs_data</span> <span class="o">=</span> <span class="n">subvs_lb_props</span><span class="p">[</span><span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">)]</span>
            <span class="n">virt_serv</span><span class="o">.</span><span class="n">subvs_data</span><span class="p">[</span><span class="s1">&#39;parentvs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MasterVSID&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># `response` needs to be a raw xml output here</span>
            <span class="c1"># Add any sub VSs to the top level VS</span>
            <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listvs&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">virt_serv</span> <span class="o">=</span> <span class="n">VirtualService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span>
                                       <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;VSAddress&#39;</span><span class="p">),</span>
                                       <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;VSPort&#39;</span><span class="p">),</span>
                                       <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Protocol&#39;</span><span class="p">),</span>
                                       <span class="n">is_sub_vs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">virt_serv</span><span class="o">.</span><span class="n">subvs_entries</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">services</span> <span class="o">=</span> <span class="n">get_dict_entry_as_list</span><span class="p">(</span><span class="s2">&quot;VS&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">this_vs_index</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Index&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">vs</span> <span class="ow">in</span> <span class="n">services</span><span class="p">:</span>
                <span class="c1"># add subvs to parent vs</span>
                <span class="k">if</span> <span class="n">vs</span><span class="p">[</span><span class="s1">&#39;MasterVSID&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">this_vs_index</span><span class="p">:</span>
                    <span class="n">subvs</span> <span class="o">=</span> <span class="n">VirtualService</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">vs</span><span class="p">[</span><span class="s1">&#39;Index&#39;</span><span class="p">],</span>
                                           <span class="n">is_sub_vs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">subvs</span><span class="o">.</span><span class="n">populate_default_attributes</span><span class="p">(</span><span class="n">vs</span><span class="p">)</span>
                    <span class="n">subvs_api_entries</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SubVS&quot;</span><span class="p">,</span> <span class="p">[])</span>
                    <span class="n">subvs_api_entries</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">subvs_api_entries</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">subvs_api</span> <span class="ow">in</span> <span class="n">subvs_api_entries</span><span class="p">:</span>
                        <span class="c1"># add the &quot;Rs&quot; part of the subvs to the subvs instance</span>
                        <span class="k">if</span> <span class="n">subvs_api</span><span class="p">[</span><span class="s2">&quot;VSIndex&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">subvs</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                            <span class="n">subvs</span><span class="o">.</span><span class="n">subvs_data</span> <span class="o">=</span> <span class="n">subvs_api</span>
                            <span class="c1"># Have to add a parentvs hook to make life easy</span>
                            <span class="n">subvs</span><span class="o">.</span><span class="n">subvs_data</span><span class="p">[</span><span class="s1">&#39;parentvs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">this_vs_index</span>
                    <span class="n">virt_serv</span><span class="o">.</span><span class="n">subvs_entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subvs</span><span class="p">)</span>
        <span class="n">virt_serv</span><span class="o">.</span><span class="n">populate_default_attributes</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">virt_serv</span></div>

<div class="viewcode-block" id="LoadMaster.get_all_objects"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_all_objects">[docs]</a>    <span class="k">def</span> <span class="nf">get_all_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># x variables are the object while x_data is the OrderedDict</span>
        <span class="n">virtual_services</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listvs&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="n">virtual_services_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;VS&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">virtual_services_data</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">virtual_services_data</span><span class="p">)</span>

        <span class="c1"># create vs and rs objects at this point</span>
        <span class="c1"># loop through all vss and attach matching real server objects</span>
        <span class="k">for</span> <span class="n">service_data</span> <span class="ow">in</span> <span class="n">virtual_services_data</span><span class="p">:</span>
            <span class="n">master_vs_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">service_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MasterVSID&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">master_vs_id</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">vs</span> <span class="ow">in</span> <span class="n">virtual_services_data</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">vs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Index&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="n">master_vs_id</span><span class="p">:</span>
                        <span class="n">virt_serv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_virtual_service</span><span class="p">(</span><span class="n">service_data</span><span class="p">,</span>
                                                               <span class="n">vs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">virt_serv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_virtual_service</span><span class="p">(</span><span class="n">service_data</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="n">real_servers</span> <span class="o">=</span> <span class="n">cast_to_list</span><span class="p">(</span><span class="n">service_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Rs&quot;</span><span class="p">,</span> <span class="p">[]))</span>
            <span class="k">for</span> <span class="n">server_data</span> <span class="ow">in</span> <span class="n">real_servers</span><span class="p">:</span>
                <span class="n">rs</span> <span class="o">=</span> <span class="n">virt_serv</span><span class="o">.</span><span class="n">build_real_server</span><span class="p">(</span><span class="n">server_data</span><span class="p">)</span>
                <span class="n">virt_serv</span><span class="o">.</span><span class="n">real_servers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>
            <span class="n">virtual_services</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">virt_serv</span><span class="p">)</span>
        <span class="c1"># replace subvs&#39;s with vs&#39;s that have RSs in them.</span>
        <span class="k">for</span> <span class="n">vs</span> <span class="ow">in</span> <span class="n">virtual_services</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">subvs</span> <span class="ow">in</span> <span class="n">vs</span><span class="o">.</span><span class="n">subvs_entries</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">top_level_vs</span> <span class="ow">in</span> <span class="n">virtual_services</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">subvs</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">top_level_vs</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                        <span class="n">subvs</span><span class="o">.</span><span class="n">real_servers</span> <span class="o">=</span> <span class="n">top_level_vs</span><span class="o">.</span><span class="n">real_servers</span>

        <span class="k">return</span> <span class="n">virtual_services</span></div>

<div class="viewcode-block" id="LoadMaster.clone_virtual_service"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.clone_virtual_service">[docs]</a>    <span class="k">def</span> <span class="nf">clone_virtual_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">dry_run</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a VirtualService instance, add it to this LoadMaster</span>

<span class="sd">        :param service: The VirtualService instance to clone</span>
<span class="sd">        :param ip: The new IP address of the virtual service</span>
<span class="sd">        :param port: The new port of the virtual service</span>
<span class="sd">        :param protocol: The new protocol of the virtual service</span>
<span class="sd">        :param enable: Enable the VirtualService</span>
<span class="sd">        :param dry_run: Don&#39;t save the VirtualSerivce immediately</span>
<span class="sd">        :return: The altered VirtualService tied to the this LoadMaster</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">VirtualService</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">NotVirtualServiceInstanceError</span><span class="p">()</span>

        <span class="n">service</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span>
        <span class="n">service</span><span class="o">.</span><span class="n">ip_address</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip_address</span>
        <span class="n">service</span><span class="o">.</span><span class="n">cert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert</span>

        <span class="n">service</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">service</span><span class="o">.</span><span class="n">vs</span> <span class="o">=</span> <span class="n">ip</span> <span class="ow">or</span> <span class="n">service</span><span class="o">.</span><span class="n">vs</span>
        <span class="n">service</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span> <span class="ow">or</span> <span class="n">service</span><span class="o">.</span><span class="n">port</span>
        <span class="n">service</span><span class="o">.</span><span class="n">prot</span> <span class="o">=</span> <span class="n">protocol</span> <span class="ow">or</span> <span class="n">service</span><span class="o">.</span><span class="n">prot</span>

        <span class="n">service</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="n">get_api_bool_string</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">dry_run</span><span class="p">:</span>
            <span class="n">service</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">service</span></div>

<div class="viewcode-block" id="LoadMaster.upload_template"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.upload_template">[docs]</a>    <span class="k">def</span> <span class="nf">upload_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="c1"># Deprecated, use create_template</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s1">&#39;/uploadtemplate&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.create_template"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.create_template">[docs]</a>    <span class="k">def</span> <span class="nf">create_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="n">existing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">templates</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="s2">&quot;/uploadtemplate&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>

        <span class="n">uploaded_templates</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">templates</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                              <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">uploaded_templates</span></div>

<div class="viewcode-block" id="LoadMaster.get_templates"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_templates">[docs]</a>    <span class="k">def</span> <span class="nf">get_templates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/listtemplates&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_object</span><span class="p">(</span><span class="n">Template</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_info</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.get_template"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_template">[docs]</a>    <span class="k">def</span> <span class="nf">get_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># There is not &#39;get&#39; for templates, only list.</span>
        <span class="n">templates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_templates</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="n">templates</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">template</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">template</span></div>

<div class="viewcode-block" id="LoadMaster.list_templates"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.list_templates">[docs]</a>    <span class="k">def</span> <span class="nf">list_templates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Backward compatability</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_templates</span><span class="p">()</span></div>

<div class="viewcode-block" id="LoadMaster.delete_template"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.delete_template">[docs]</a>    <span class="k">def</span> <span class="nf">delete_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template_name</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">template_name</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/deltemplate&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.apply_template"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.apply_template">[docs]</a>    <span class="k">def</span> <span class="nf">apply_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">virtual_ip</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">protocol</span><span class="p">,</span> <span class="n">template_name</span><span class="p">,</span>
                       <span class="n">nickname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;vs&#39;</span><span class="p">:</span> <span class="n">virtual_ip</span><span class="p">,</span>
            <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="n">port</span><span class="p">,</span>
            <span class="s1">&#39;prot&#39;</span><span class="p">:</span> <span class="n">protocol</span><span class="p">,</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">template_name</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">existing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">nickname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;nickname&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nickname</span>

        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s2">&quot;/addvs&quot;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_successful</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
            <span class="n">vs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                  <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">KempTechApiException</span><span class="p">(</span><span class="n">get_error_msg</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">vs</span></div>

<div class="viewcode-block" id="LoadMaster.get_sdn_controller"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_sdn_controller">[docs]</a>    <span class="k">def</span> <span class="nf">get_sdn_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/getsdncontroller&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>

<div class="viewcode-block" id="LoadMaster.get_sdn_info"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMaster.get_sdn_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_sdn_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="s1">&#39;/sdninfo&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">send_response</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LoadMasterGeo"><a class="viewcode-back" href="../../python_kemptech_api.models.html#python_kemptech_api.models.LoadMasterGeo">[docs]</a><span class="k">class</span> <span class="nc">LoadMasterGeo</span><span class="p">(</span><span class="n">LoadMaster</span><span class="p">,</span> <span class="n">Geo</span><span class="p">):</span>
    <span class="k">pass</span></div>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, KEMP Technologies.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.7.18',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>